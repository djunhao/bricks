<!DOCTYPE html>
<html>
<head>
    <title>user edit</title>
    <meta charset="UTF-8"/>
</head>
<body>

<form class="form-horizontal" action="/bricks/useradmin/edit/@{user.id}" method="post">
    <legend>更新用户</legend>
    <input type="hidden" name="__sitebricks__action" value="put"/>
    <div class="control-group">
        <label class="control-label" for="inputName">登录名</label>
        <div class="controls">
            <input type="text" name="user.loginName" value="@{user.loginName}" id="inputName" placeholder="登录名">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputRealName">真实姓名</label>
        <div class="controls">
            <input type="text" value="@{user.realName}" id="inputRealName" name="user.realName" placeholder="真实姓名">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputPassword">密&nbsp;&nbsp;&nbsp;&nbsp;码</label>
        <div class="controls">
            <input type="password" name="user.password" value="@{user.password}" id="inputPassword" placeholder="密   码">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputRole">权&nbsp;&nbsp;&nbsp;&nbsp;限</label>
        <div class="controls">
            <select id="inputRole" name="role.name">
                @foreach{arole : roleList}
                @if{arole.name == user.role.name}
                <option value="@{arole.name}" selected>@{arole.name}</option>
                @else{}
                <option value="@{arole.name}">@{arole.name}</option>
                @end{}
                @end{}
            </select>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputEnforcementNumber">执法证号</label>
        <div class="controls">
            <input type="text" value="@{user.enforcementNumber}" id="inputEnforcementNumber" name="user.enforcementNumber" placeholder="执法证号">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputValidEnforcementDate">执法证有效期</label>
        <div class="controls">
            <input type="datetime" value="@{user.validEnforcementDate}" id="inputValidEnforcementDate" name="user.validEnforcementDate" placeholder="执法证有效期">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputSupervisorNumber">监察员证号</label>
        <div class="controls">
            <input type="text" value="@{user.supervisorNumber}" id="inputSupervisorNumber" name="user.supervisorNumber" placeholder="监察员证号">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputValidSupervisorDate">监察员证有效期</label>
        <div class="controls">
            <input type="datetime" value="@{user.validSupervisorDate}" id="inputValidSupervisorDate" name="user.validSupervisorNumber" placeholder="监察员证有效期">
        </div>
    </div>
    <div class="control-group">
        <div class="controls">
            <button type="submit" class="btn btn-inverse">保存</button>
        </div>
    </div>
</form>

<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.actual.min.js"></script>
<script src="/js/jquery.form.js"></script>
<script src="/lib/validation/jquery.validate.min.js"></script>
<script src="/bootstrap/js/bootstrap.min.js"></script>
<script src="/lib/datepicker/js/bootstrap-datepicker.js"></script>
<script src="/lib/datepicker/js/bootstrap-datepicker.zh-CN.js"></script>
<script>
    $(document).ready(function () {
        $('#inputValidEnforcementDate').datepicker({
            format:'yyyy-mm-dd',
            language:'zh-CN',
            autoclose:true
        });
        $('#inputValidSupervisorDate').datepicker({
            format:'yyyy-mm-dd',
            language:'zh-CN',
            autoclose:true
        });
        //* validation
        $('#newUser').validate({
            onkeyup:false,
            errorClass:'error',
            validClass:'valid',
            rules:{
                name:{ required:true, minlength:3 },
                realName:{ required:true, minlength:2},
                password:{ required:true, minlength:3 },
                enforcementNumber:{required:true, minlength:7},
                validEnforcementDate:{required:true}
            },
            messages:{
                loginName:{
                    required:'请输入您的登录名！',
                    minlength:'登录名不能少于3个字符！'
                },
                password:{
                    required:'请输入您的密码！',
                    minlength:'密码不能少于3个字符！'
                }
            },
            highlight:function (element) {
                $(element).closest('div').addClass("f_error");
            },
            unhighlight:function (element) {
                $(element).closest('div').removeClass("f_error");
            },
            errorPlacement:function (error, element) {
                $(element).closest('div').append(error);
            }
            //submitHandler:formSubmit
        });
    });
</script>
</body>
</html>